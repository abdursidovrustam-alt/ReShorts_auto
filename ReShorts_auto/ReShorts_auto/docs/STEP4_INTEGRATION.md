# üéâ –®–∞–≥ 4 –ó–ê–í–ï–†–®–ï–ù: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è –ø–æ–∏—Å–∫–∞ YouTube –≤ Flask backend

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app.py`:**
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `YouTubeSearcher` –∏–∑ `content_discovery.youtube_search`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è –≤ –º–µ—Ç–æ–¥–µ `_init_modules()`
- –ó–∞–º–µ–Ω–µ–Ω–∞ –∑–∞–≥–ª—É—à–∫–∞ –º–µ—Ç–æ–¥–∞ `search_viral_videos()` –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
- –ú–µ—Ç–æ–¥ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç YouTube Data API v3 –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤–∏—Ä—É—Å–Ω—ã—Ö –≤–∏–¥–µ–æ

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü–æ–∏—Å–∫ –≤–∏–¥–µ–æ –ø–æ —Ç–µ–º–µ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫: –ø—Ä–æ—Å–º–æ—Ç—Ä—ã, –ª–∞–π–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- –†–∞—Å—á–µ—Ç engagement rate (–≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç–∏)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–∏—Å–∫–∞ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏

**API Endpoint:** `POST /api/search`

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "theme": "–º–æ—Ç–∏–≤–∞—Ü–∏—è",
  "platform": "youtube",
  "videoCount": 10,
  "daysAgo": 30,
  "minViews": 50000
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "status": "success",
  "found": 10,
  "theme": "–º–æ—Ç–∏–≤–∞—Ü–∏—è",
  "platform": "youtube",
  "videos": [
    {
      "id": "dQw4w9WgXcQ",
      "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ",
      "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
      "thumbnail": "https://...",
      "channel": "–ö–∞–Ω–∞–ª –∞–≤—Ç–æ—Ä–∞",
      "duration": 180,
      "views": 1000000,
      "likes": 50000,
      "comments": 5000,
      "engagement_rate": 5.5,
      "viral_score": 0.85
    }
  ]
}
```

---

### ‚úÖ 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ –≤ Flask backend

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app.py`:**
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `VideoDownloader` –∏–∑ `modules.downloader`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è downloader –≤ –º–µ—Ç–æ–¥–µ `_init_modules()`
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ `download_videos()`
- –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π API endpoint –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å YouTube, TikTok, Instagram
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–µ–æ –æ—Ç–¥–µ–ª—å–Ω–æ

**API Endpoint:** `POST /api/download_from_youtube`

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "video_urls": [
    "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
    "https://www.youtube.com/watch?v=another_video"
  ]
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "status": "success",
  "downloaded": 2,
  "failed": 0,
  "total": 2,
  "files": [
    {
      "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
      "file_path": "/workspace/viral-shorts-master/downloads/video_123.mp4",
      "success": true
    }
  ],
  "errors": []
}
```

---

### ‚úÖ 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ –≤ Flask backend

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `app.py`:**
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `AdvancedVideoProcessor` –∏–∑ `video_processor.processor`
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –≤ –º–µ—Ç–æ–¥–µ `_init_modules()`
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –º–µ—Ç–æ–¥ `uniqualize_videos()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 26+ –≤–∏–¥–µ–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ 26 –≤–∏–¥–µ–æ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤:
  - **–¶–≤–µ—Ç–æ–≤—ã–µ:** —è—Ä–∫–æ—Å—Ç—å, –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å, –æ—Ç—Ç–µ–Ω–æ–∫, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
  - **–°—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ:** —Å–µ–ø–∏—è, –≤–∏–Ω—Ç–∞–∂, –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π, –Ω–µ–æ–Ω, —Ä–µ—Ç—Ä–æ, –∫–∏–±–µ—Ä–ø–∞–Ω–∫
  - **–§–∏–ª—å—Ç—Ä—ã:** —Ä–∞–∑–º—ã—Ç–∏–µ, —Ä–µ–∑–∫–æ—Å—Ç—å, —à—É–º, –∑–µ—Ä–Ω–æ –ø–ª–µ–Ω–∫–∏, —ç–º–±–æ—Å—Å
  - **–ì–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ:** –≤–∏–Ω—å–µ—Ç–∫–∞, —ç—Ñ—Ñ–µ–∫—Ç —Ä—ã–±—å–µ–≥–æ –≥–ª–∞–∑–∞, —Ö—Ä–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–±–µ—Ä—Ä–∞—Ü–∏—è
  - **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ:** –≥–ª–∏—Ç—á, –ø–∏–∫—Å–µ–ª–∏–∑–∞—Ü–∏—è, –∑–µ—Ä–∫–∞–ª–æ
- 3 —É—Ä–æ–≤–Ω—è —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏–∏: low, medium, high
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ (uniqueness score)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–∫–µ—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**API Endpoint:** `POST /api/uniqualize`

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "video_files": [
    "/workspace/viral-shorts-master/downloads/video_123.mp4"
  ],
  "uniqueness": "medium",
  "add_text": false
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "status": "success",
  "uniqueness_level": "medium",
  "processed": 1,
  "failed": 0,
  "total": 1,
  "processed_videos": [
    {
      "original_file": "/workspace/.../video_123.mp4",
      "processed_file": "/workspace/.../processed_20251017_115030_video_123.mp4",
      "uniqueness_score": 0.756,
      "effects": ["brightness", "contrast", "saturation", "vignette", "sharpen", "film_grain"],
      "duration": 45.2,
      "size_mb": 12.5,
      "processing_time": 18.7
    }
  ],
  "errors": [],
  "effects_applied": ["brightness", "contrast", "saturation", "vignette", "sharpen", "film_grain"]
}
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `config.json` –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Å–µ–∫—Ü–∏–∏:

```json
{
  "paths": {
    "downloads": "./downloads",
    "processed": "./processed",
    "temp": "./tmp"
  },
  "proxy": {
    "enabled": false,
    "http_proxy": "",
    "https_proxy": ""
  },
  "video_processing": {
    "max_duration": 60,
    "target_fps": 30,
    "clear_metadata": true
  }
}
```

### API –ú–∞—Ä—à—Ä—É—Ç—ã

–í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ API endpoints:

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|------|----------|
| POST | `/api/search` | –ü–æ–∏—Å–∫ –≤–∏—Ä—É—Å–Ω—ã—Ö –≤–∏–¥–µ–æ |
| POST | `/api/analyze` | –ê–Ω–∞–ª–∏–∑ –≤–∏–¥–µ–æ –Ω–∞ –≤–∏—Ä—É—Å–Ω–æ—Å—Ç—å |
| POST | `/api/uniqualize` | –£–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ |
| POST | `/api/save` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |
| POST | `/api/download_from_youtube` | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å YouTube |
| GET | `/api/download/<video_id>` | –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ |
| GET | `/api/stats` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ |
| GET/POST | `/api/config` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π |

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –≤ —Ñ–∞–π–ª–µ `test_integration.py`.

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```
‚úÖ –ü–†–û–ô–î–ï–ù  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
‚úÖ –ü–†–û–ô–î–ï–ù  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚è≠Ô∏è –ü–†–û–ü–£–©–ï–ù - –ü–æ–∏—Å–∫ YouTube (—Ç—Ä–µ–±—É–µ—Ç—Å—è API –∫–ª—é—á)
‚úÖ –ü–†–û–ô–î–ï–ù  - –í–∏–¥–µ–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
‚úÖ –ü–†–û–ô–î–ï–ù  - API –º–∞—Ä—à—Ä—É—Ç—ã
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
python test_integration.py
```

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
ViralShortsApp
‚îú‚îÄ‚îÄ YouTubeSearcher (content_discovery/youtube_search.py)
‚îÇ   ‚îî‚îÄ‚îÄ –ü–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑ –≤–∏—Ä—É—Å–Ω—ã—Ö –≤–∏–¥–µ–æ –Ω–∞ YouTube
‚îú‚îÄ‚îÄ VideoDownloader (modules/downloader.py)
‚îÇ   ‚îî‚îÄ‚îÄ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å YouTube/TikTok/Instagram
‚îî‚îÄ‚îÄ AdvancedVideoProcessor (video_processor/processor.py)
    ‚îî‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ (26 —ç—Ñ—Ñ–µ–∫—Ç–æ–≤)
```

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º API
2. **–§–∏–Ω–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–î–µ–ø–ª–æ–π** - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω-–∑–∞–ø—É—Å–∫—É

### –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- ‚úÖ Backend API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

---

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **YouTube API –∫–ª—é—á** –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ–∏—Å–∫–∞ –≤–∏–¥–µ–æ. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `config.json`:
   ```json
   {
     "api_keys": {
       "youtube_api_key": "YOUR_API_KEY_HERE"
     }
   }
   ```

2. **Cookies –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è** –º–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º (Instagram). –ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª `cookies.txt` –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞.

3. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
   ```bash
   pip install -r requirements.txt
   ```

---

**–ê–≤—Ç–æ—Ä:** MiniMax Agent  
**–î–∞—Ç–∞:** 2025-10-17  
**–í–µ—Ä—Å–∏—è:** 1.0.0
